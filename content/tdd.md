---
title: "테스트 주도 개발(TDD)"
metaTitle: "테스트 주도 개발(TDD)"
metaDescription: "This is the meta description for this page"
---

## TDD란?

Test Driven Development는 테스트 주도 개발이라는 의미로 테스트가 개발을 이끌어 나간다는 의미입니다.  
&nbsp;  
테스트를 먼저 만들고 테스트를 통과하기 위한 것을 짜는 것 즉,  
만드는 과정에서 우선 테스트 케이스를 작성하고 그걸 통과하는 코드를 만드는 과정을  
반복하면서 제대로 동작하는지에 대한 피드백을 적극적으로 받는 것을 의미합니다.  
&nbsp;  
보통의 개발자들은 코딩이 다 끝나고 테스트를 진행하게됩니다.  
코딩이 다 끝났다는 것은 코드를 짠뒤 완성했다고 생각했을 때를 의미하죠.  
&nbsp;  
TDD는 이 순서를 바꾸는 것입니다.  
즉, 테스트 케이스를 먼저 만들어 테스트가 통과되면 그때 코드를 완성하는 순서이죠.  

### TDD 적용 사례

예를 들어, 생년월일(input)을 입력받으면 현재 나이(output)를 출력하는 프로그램을 만든다고 가정합시다.  
&nbsp;  
처음에는 간단한 것으로 목표를 정합니다. (태어난 해와 올해의 연도를 입력)  
2015, 2018 -> (만)3살 우선 이것을 만들겠다는 생각을 합니다.
&nbsp;  
만들기도 전에 만든 후에 무엇을 테스트할지를 설계합니다.  
&nbsp;  
2015, 2018를 입력하면 2가 나오는 테스트 프로그램(장차 만들 프로그램을 테스트할 코드)를 만듭니다.  
&nbsp;  
그 다음에 그 테스트를 통과할 프로그램(1.을 목표로 작성한 코드)를 만듭니다.  
올해의 연도 - 태어난 해  
2018 - 2015  
&nbsp;  
테스트 프로그램으로 이 프로그램(3.에 해당하는 코드)을 실행합니다.  
통과했으면 새로운 테스트를 추가합니다.  
&nbsp;  
이번에는 생월을 추가했을 때 계산하는 프로그램을 만듭니다.  
위와 같은 작업을 계속 왔다갔다 수행합니다.

## TDD를 왜 해야할까

애자일이란에서 설명한 것과 같이 불확실성이 높을 때 `피드백`과 `협력`이 중요하다.

## 피드백과 협력이 중요한 이유

불확실성이 높을 때 `피드백`과 `협력`을 이용하면 더 좋은 결과가 나올 확률이 높아진다.  
&nbsp;  
TDD도 마찬가지로 `피드백`과 `협력`을 증진시키는 것이기 때문에 불확실성이 높을 때 도움이 되는 것이다.  

## TDD는 어떤 상황에서 해야할까

만약 어떤 부분에 대한 코딩을 여러번 해봤고 결과가 어떻게 나올지 뻔하다면 TDD를 하지 않아도 된다.  
&nbsp;  
또한 TDD를 했을 때 얻는 것이 적다면 TDD를 하지 않아도 된다.  
&nbsp;  
그렇다면 TDD는 어떤 상황에서 해야할까?

1. 처음해보는 프로그램 주제
    - 나에 대한 불확실성이 높은 경우
2. 고객의 요구조건이 바뀔 수 있는 프로젝트
    - 외부적인 불확실성이 높은 경우
3. 개발하는 중에 코드를 많이 바꿔야 된다고 생각하는 경우
4. 내가 개발하고 나서 이 코드를 누가 유지보수할지 모르는 경우
&nbsp;  
즉, 불확실성이 높을 때 TDD를 하면 된다.  

## TDD의 효과

모든 애자일의 실천법은 `피드백`과 `협력`을 동시에 증진시킨다.

1. 피드백
    - TDD를 하면 피드백이 증가한다.  
        - 테스트를 통과하는 것으로 잘되고 있는가를 자주 확인할 수 있다.  
        - 이 부분은 사람들이 쉽게 느낄 수 있다.  

2. 협력(이 부분이 핵심!)
    - 켄트 벡(Kent Beck)
        - `test`는 일반적으로 동사로 사용한다. `테스트한다.`, `테스트해라.`
        - 예를 들어, 누가 나한테 생년월일(input)을 입력받으면 현재 나이(output)를 출력하는 프로그램을 주고 test해보라고 한다면 내가 할 수 있는 것은 숫자를 여러 개 찍어보는 것이다.
            - 태어난 시간과 지금 시간이 같으면 0
            - 태어난 시간이 더 미래의 시간이면 `출생 전`
            - 등등
        - 그러나 TDD를 하면 `test`는 명사가 된다.
    - `test`가 명사가 되면?
        - 동사는 그 순간에만 하는 것이고, 명사(대상, 목적어)는 이후에도 소유할 수가 있다.
        - 즉, record로 남을 수 있다.
        - `test`가 저장된다는 것은 남들에게 남들에게 테스트 코드를 보여줄 수 있고, 남들은 그 코드를 직접 실행해볼 수 있다는 것이다.
    - 그렇다면 TDD는 왜 협력을 증진시키는가?
        - `test`가 명사(대상, 목적어)가 되는 순간 이것을 공유하기가 쉬워진다.
        - 공유하면 협력이 증진된다.
            1. 남이 짠 코드를 빨리 이해할 수 있다.
            2. 남이 짠 코드를 쉽게 이해할 수 있다.
            3. 용기가 생긴다.(내가 남의 코드를 고쳐서 문제가 있더라도 자동화된 테스트가 알려주기 때문에 큰 걱정없이 고칠 수 있는 용기가 생긴다.)
                - 내가 이 코드를 고쳤을 때 이것을 망치면 어떡하지..
                - 내가 그 사람의 의도를 모르는데 이것을 고쳐도 될까..
    - 즉, 왜 이렇게 짰을까 궁금할 때 `test`를 공유하고 그 테스트 코드를 보면 이해할 수 있다.
    - 테스트 코드에는 개발자의 개발 과정(어떤 고민/어떤 의사결정)이 나와있기 때문이다.
    - 앞의 TDD의 정의(결정(decision)과 피드백(feedback) 사이의 갭을 인식하는 것)와 같이 테스트 코드(feedback)를 보면 그 사람의 의사결정(decision)이 나타나고 상대방은 그 부분은 왜 그렇게 짰는지를 쉽고 빨리 알게 되기 때문에 협력이 증진된다.

## 그렇다면 TDD는 왜 좋을까

피드백과 협력을 증진시키기 때문에 불확실성에 대해 대비를 하게 해준다.  
&nbsp;  

- 개발속도가 느려진다고 생각하는 사람이 많기 때문에 사람들은 TDD에 대해 반신반의 한다.
    - 처음부터 2개의 코드를 짜야한다.
    - 중간중간 테스트를 하면서 고쳐나가야한다.

## TDD의 장단점

- 연구 논문 결론 취합

1. TDD를 하면 개발 시간이 늘어난다.
    - 개발 시간의 정의?
        - 본인이 ‘다했다고’생각할 때까지, 기능 구현이 끝났을 때까지
    - 개발 시간이 TDD를 하지않을 때에 비해 대략 10~30%가 늘어난다.
2. TDD를 하면 결함이 줄어든다.
    - 결함이 1/2~1/10 까지 줄어든다.
    - SW를 개발하면서 예상하지 못했던 시간을 많이 소요하는 것은 대부분이 버그 때문이다.
    - TDD를 하면 이런 버그를 줄일 수 있다.
3. TDD를 하면 코드 복잡도가 떨어진다.
    - 엔트로피(Entropie)가 낮아진다.
    - 깨끗한 코드 가 나온다.
    - 유지보수 비용이 낮아진다.

- cf. 복잡도에 대한 재미있는 연구
    - 복잡도에 대해 수치로 계산할 수 있다.
    - 들여쓰기(Indent)가 많은 코드는 복잡한 코드이다.
    - 복잡성 지표(Cyclomatic Complexity)를 통해 들여쓰기에 따라 복잡도를 숫자로 계산한다.
    - 계산한 복잡도가 일정 수치 이상이 넘어가면 버그를 고칠 때 나도 모르게 버그를 삽입할 확률이 1에 수렴한다.
        - 즉, 내가 버그 하나를 고치려고 그 코드를 고쳤는데 나도 모르게 새로운 버그를 넣는 확률이 1에 수렴한다는 것이다.
    - 복잡도가 높으면 버그 숫자가 줄지 않는다.
